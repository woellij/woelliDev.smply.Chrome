/*!
 * Parse JavaScript SDK
 * Version: 1.2.18
 * Built: Wed Mar 12 2014 15:36:03
 * http://parse.com
 *
 * Copyright 2014 Parse, Inc.
 * The Parse JavaScript SDK is freely distributable under the MIT license.
 *
 * Includes: Underscore.js
 * Copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * Released under the MIT license.
 */
(function(n){n.Parse=n.Parse||{};n.Parse.VERSION="js1.2.18"})(this),function(){var a=this,ct=a._,e={},r=Array.prototype,g=Object.prototype,lt=Function.prototype,v=r.push,t=r.slice,o=r.concat,f=g.toString,at=g.hasOwnProperty,nt=r.forEach,tt=r.map,it=r.reduce,rt=r.reduceRight,ut=r.filter,ft=r.every,et=r.some,s=r.indexOf,ot=r.lastIndexOf,vt=Array.isArray,yt=Object.keys,y=lt.bind,n=function(t){if(t instanceof n)return t;if(!(this instanceof n))return new n(t);this._wrapped=t},i,p,w,h,b,k,c,u,st,ht,l;typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports._=n):a._=n;n.VERSION="1.4.4";i=n.each=n.forEach=function(t,i,r){var u,o,f;if(t!=null)if(nt&&t.forEach===nt)t.forEach(i,r);else if(t.length===+t.length){for(u=0,o=t.length;u<o;u++)if(i.call(r,t[u],u,t)===e)return}else for(f in t)if(n.has(t,f)&&i.call(r,t[f],f,t)===e)return};n.map=n.collect=function(n,t,r){var u=[];return n==null?u:tt&&n.map===tt?n.map(t,r):(i(n,function(n,i,f){u[u.length]=t.call(r,n,i,f)}),u)};p="Reduce of empty array with no initial value";n.reduce=n.foldl=n.inject=function(t,r,u,f){var e=arguments.length>2;if(t==null&&(t=[]),it&&t.reduce===it)return f&&(r=n.bind(r,f)),e?t.reduce(r,u):t.reduce(r);if(i(t,function(n,t,i){e?u=r.call(f,u,n,t,i):(u=n,e=!0)}),!e)throw new TypeError(p);return u};n.reduceRight=n.foldr=function(t,r,u,f){var o=arguments.length>2,e,s;if(t==null&&(t=[]),rt&&t.reduceRight===rt)return f&&(r=n.bind(r,f)),o?t.reduceRight(r,u):t.reduceRight(r);if(e=t.length,e!==+e&&(s=n.keys(t),e=s.length),i(t,function(n,i,h){i=s?s[--e]:--e;o?u=r.call(f,u,t[i],i,h):(u=t[i],o=!0)}),!o)throw new TypeError(p);return u};n.find=n.detect=function(n,t,i){var r;return w(n,function(n,u,f){if(t.call(i,n,u,f))return r=n,!0}),r};n.filter=n.select=function(n,t,r){var u=[];return n==null?u:ut&&n.filter===ut?n.filter(t,r):(i(n,function(n,i,f){t.call(r,n,i,f)&&(u[u.length]=n)}),u)};n.reject=function(t,i,r){return n.filter(t,function(n,t,u){return!i.call(r,n,t,u)},r)};n.every=n.all=function(t,r,u){r||(r=n.identity);var f=!0;return t==null?f:ft&&t.every===ft?t.every(r,u):(i(t,function(n,t,i){if(!(f=f&&r.call(u,n,t,i)))return e}),!!f)};w=n.some=n.any=function(t,r,u){r||(r=n.identity);var f=!1;return t==null?f:et&&t.some===et?t.some(r,u):(i(t,function(n,t,i){if(f||(f=r.call(u,n,t,i)))return e}),!!f)};n.contains=n.include=function(n,t){return n==null?!1:s&&n.indexOf===s?n.indexOf(t)!=-1:w(n,function(n){return n===t})};n.invoke=function(i,r){var u=t.call(arguments,2),f=n.isFunction(r);return n.map(i,function(n){return(f?r:n[r]).apply(n,u)})};n.pluck=function(t,i){return n.map(t,function(n){return n[i]})};n.where=function(t,i,r){return n.isEmpty(i)?r?null:[]:n[r?"find":"filter"](t,function(n){for(var t in i)if(i[t]!==n[t])return!1;return!0})};n.findWhere=function(t,i){return n.where(t,i,!0)};n.max=function(t,r,u){if(!r&&n.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!r&&n.isEmpty(t))return-Infinity;var f={computed:-Infinity,value:-Infinity};return i(t,function(n,t,i){var e=r?r.call(u,n,t,i):n;e>=f.computed&&(f={value:n,computed:e})}),f.value};n.min=function(t,r,u){if(!r&&n.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!r&&n.isEmpty(t))return Infinity;var f={computed:Infinity,value:Infinity};return i(t,function(n,t,i){var e=r?r.call(u,n,t,i):n;e<f.computed&&(f={value:n,computed:e})}),f.value};n.shuffle=function(t){var u,f=0,r=[];return i(t,function(t){u=n.random(f++);r[f-1]=r[u];r[u]=t}),r};h=function(t){return n.isFunction(t)?t:function(n){return n[t]}};n.sortBy=function(t,i,r){var u=h(i);return n.pluck(n.map(t,function(n,t,i){return{value:n,index:t,criteria:u.call(r,n,t,i)}}).sort(function(n,t){var i=n.criteria,r=t.criteria;if(i!==r){if(i>r||i===void 0)return 1;if(i<r||r===void 0)return-1}return n.index<t.index?-1:1}),"value")};b=function(t,r,u,f){var e={},o=h(r||n.identity);return i(t,function(n,i){var r=o.call(u,n,i,t);f(e,r,n)}),e};n.groupBy=function(t,i,r){return b(t,i,r,function(t,i,r){(n.has(t,i)?t[i]:t[i]=[]).push(r)})};n.countBy=function(t,i,r){return b(t,i,r,function(t,i){n.has(t,i)||(t[i]=0);t[i]++})};n.sortedIndex=function(t,i,r,u){var e;r=r==null?n.identity:h(r);for(var s=r.call(u,i),f=0,o=t.length;f<o;)e=f+o>>>1,r.call(u,t[e])<s?f=e+1:o=e;return f};n.toArray=function(i){return i?n.isArray(i)?t.call(i):i.length===+i.length?n.map(i,n.identity):n.values(i):[]};n.size=function(t){return t==null?0:t.length===+t.length?t.length:n.keys(t).length};n.first=n.head=n.take=function(n,i,r){if(n!=null)return i!=null&&!r?t.call(n,0,i):n[0]};n.initial=function(n,i,r){return t.call(n,0,n.length-(i==null||r?1:i))};n.last=function(n,i,r){if(n!=null)return i==null||r?n[n.length-1]:t.call(n,Math.max(n.length-i,0))};n.rest=n.tail=n.drop=function(n,i,r){return t.call(n,i==null||r?1:i)};n.compact=function(t){return n.filter(t,n.identity)};k=function(t,r,u){return i(t,function(t){n.isArray(t)?r?v.apply(u,t):k(t,r,u):u.push(t)}),u};n.flatten=function(n,t){return k(n,t,[])};n.without=function(i){return n.difference(i,t.call(arguments,1))};n.uniq=n.unique=function(t,r,u,f){n.isFunction(r)&&(f=u,u=r,r=!1);var s=u?n.map(t,u,f):t,o=[],e=[];return i(s,function(i,u){(r?u&&e[e.length-1]===i:n.contains(e,i))||(e.push(i),o.push(t[u]))}),o};n.union=function(){return n.uniq(o.apply(r,arguments))};n.intersection=function(i){var r=t.call(arguments,1);return n.filter(n.uniq(i),function(t){return n.every(r,function(i){return n.indexOf(i,t)>=0})})};n.difference=function(i){var u=o.apply(r,t.call(arguments,1));return n.filter(i,function(t){return!n.contains(u,t)})};n.zip=function(){for(var r=t.call(arguments),u=n.max(n.pluck(r,"length")),f=new Array(u),i=0;i<u;i++)f[i]=n.pluck(r,""+i);return f};n.object=function(n,t){var r,i,u;if(n==null)return{};for(r={},i=0,u=n.length;i<u;i++)t?r[n[i]]=t[i]:r[n[i][0]]=n[i][1];return r};n.indexOf=function(t,i,r){if(t==null)return-1;var u=0,f=t.length;if(r)if(typeof r=="number")u=r<0?Math.max(0,f+r):r;else return u=n.sortedIndex(t,i),t[u]===i?u:-1;if(s&&t.indexOf===s)return t.indexOf(i,r);for(;u<f;u++)if(t[u]===i)return u;return-1};n.lastIndexOf=function(n,t,i){var u,r;if(n==null)return-1;if(u=i!=null,ot&&n.lastIndexOf===ot)return u?n.lastIndexOf(t,i):n.lastIndexOf(t);for(r=u?i:n.length;r--;)if(n[r]===t)return r;return-1};n.range=function(n,t,i){arguments.length<=1&&(t=n||0,n=0);i=arguments[2]||1;for(var r=Math.max(Math.ceil((t-n)/i),0),u=0,f=new Array(r);u<r;)f[u++]=n,n+=i;return f};n.bind=function(n,i){if(n.bind===y&&y)return y.apply(n,t.call(arguments,1));var r=t.call(arguments,2);return function(){return n.apply(i,r.concat(t.call(arguments)))}};n.partial=function(n){var i=t.call(arguments,1);return function(){return n.apply(this,i.concat(t.call(arguments)))}};n.bindAll=function(r){var u=t.call(arguments,1);return u.length===0&&(u=n.functions(r)),i(u,function(t){r[t]=n.bind(r[t],r)}),r};n.memoize=function(t,i){var r={};return i||(i=n.identity),function(){var u=i.apply(this,arguments);return n.has(r,u)?r[u]:r[u]=t.apply(this,arguments)}};n.delay=function(n,i){var r=t.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},i)};n.defer=function(i){return n.delay.apply(n,[i,1].concat(t.call(arguments,1)))};n.throttle=function(n,t){var r,u,i,f,e=0,o=function(){e=new Date;i=null;f=n.apply(r,u)};return function(){var s=new Date,h=t-(s-e);return r=this,u=arguments,h<=0?(clearTimeout(i),i=null,e=s,f=n.apply(r,u)):i||(i=setTimeout(o,h)),f}};n.debounce=function(n,t,i){var r,u;return function(){var f=this,e=arguments,o=function(){r=null;i||(u=n.apply(f,e))},s=i&&!r;return clearTimeout(r),r=setTimeout(o,t),s&&(u=n.apply(f,e)),u}};n.once=function(n){var i=!1,t;return function(){return i?t:(i=!0,t=n.apply(this,arguments),n=null,t)}};n.wrap=function(n,t){return function(){var i=[n];return v.apply(i,arguments),t.apply(this,i)}};n.compose=function(){var n=arguments;return function(){for(var t=arguments,i=n.length-1;i>=0;i--)t=[n[i].apply(this,t)];return t[0]}};n.after=function(n,t){return n<=0?t():function(){if(--n<1)return t.apply(this,arguments)}};n.keys=yt||function(t){var i,r;if(t!==Object(t))throw new TypeError("Invalid object");i=[];for(r in t)n.has(t,r)&&(i[i.length]=r);return i};n.values=function(t){var i=[];for(var r in t)n.has(t,r)&&i.push(t[r]);return i};n.pairs=function(t){var r=[];for(var i in t)n.has(t,i)&&r.push([i,t[i]]);return r};n.invert=function(t){var r={};for(var i in t)n.has(t,i)&&(r[t[i]]=i);return r};n.functions=n.methods=function(t){var i=[];for(var r in t)n.isFunction(t[r])&&i.push(r);return i.sort()};n.extend=function(n){return i(t.call(arguments,1),function(t){if(t)for(var i in t)n[i]=t[i]}),n};n.pick=function(n){var u={},f=o.apply(r,t.call(arguments,1));return i(f,function(t){t in n&&(u[t]=n[t])}),u};n.omit=function(i){var f={},e=o.apply(r,t.call(arguments,1));for(var u in i)n.contains(e,u)||(f[u]=i[u]);return f};n.defaults=function(n){return i(t.call(arguments,1),function(t){if(t)for(var i in t)n[i]==null&&(n[i]=t[i])}),n};n.clone=function(t){return n.isObject(t)?n.isArray(t)?t.slice():n.extend({},t):t};n.tap=function(n,t){return t(n),n};c=function(t,i,r,u){var a,v,e,o,h,l,s;if(t===i)return t!==0||1/t==1/i;if(t==null||i==null)return t===i;if(t instanceof n&&(t=t._wrapped),i instanceof n&&(i=i._wrapped),a=f.call(t),a!=f.call(i))return!1;switch(a){case"[object String]":return t==String(i);case"[object Number]":return t!=+t?i!=+i:t==0?1/t==1/i:t==+i;case"[object Date]":case"[object Boolean]":return+t==+i;case"[object RegExp]":return t.source==i.source&&t.global==i.global&&t.multiline==i.multiline&&t.ignoreCase==i.ignoreCase}if(typeof t!="object"||typeof i!="object")return!1;for(v=r.length;v--;)if(r[v]==t)return u[v]==i;if(r.push(t),u.push(i),e=0,o=!0,a=="[object Array]"){if(e=t.length,o=e==i.length,o)while(e--)if(!(o=c(t[e],i[e],r,u)))break}else{if(h=t.constructor,l=i.constructor,h!==l&&!(n.isFunction(h)&&h instanceof h&&n.isFunction(l)&&l instanceof l))return!1;for(s in t)if(n.has(t,s)&&(e++,!(o=n.has(i,s)&&c(t[s],i[s],r,u))))break;if(o){for(s in i)if(n.has(i,s)&&!e--)break;o=!e}}return r.pop(),u.pop(),o};n.isEqual=function(n,t){return c(n,t,[],[])};n.isEmpty=function(t){if(t==null)return!0;if(n.isArray(t)||n.isString(t))return t.length===0;for(var i in t)if(n.has(t,i))return!1;return!0};n.isElement=function(n){return!!(n&&n.nodeType===1)};n.isArray=vt||function(n){return f.call(n)=="[object Array]"};n.isObject=function(n){return n===Object(n)};i(["Arguments","Function","String","Number","Date","RegExp"],function(t){n["is"+t]=function(n){return f.call(n)=="[object "+t+"]"}});n.isArguments(arguments)||(n.isArguments=function(t){return!!(t&&n.has(t,"callee"))});typeof/./!="function"&&(n.isFunction=function(n){return typeof n=="function"});n.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))};n.isNaN=function(t){return n.isNumber(t)&&t!=+t};n.isBoolean=function(n){return n===!0||n===!1||f.call(n)=="[object Boolean]"};n.isNull=function(n){return n===null};n.isUndefined=function(n){return n===void 0};n.has=function(n,t){return at.call(n,t)};n.noConflict=function(){return a._=ct,this};n.identity=function(n){return n};n.times=function(n,t,i){for(var u=Array(n),r=0;r<n;r++)u[r]=t.call(i,r);return u};n.random=function(n,t){return t==null&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};u={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};u.unescape=n.invert(u.escape);st={escape:new RegExp("["+n.keys(u.escape).join("")+"]","g"),unescape:new RegExp("("+n.keys(u.unescape).join("|")+")","g")};n.each(["escape","unescape"],function(t){n[t]=function(n){return n==null?"":(""+n).replace(st[t],function(n){return u[t][n]})}});n.result=function(t,i){if(t==null)return null;var r=t[i];return n.isFunction(r)?r.call(t):r};n.mixin=function(t){i(n.functions(t),function(i){var r=n[i]=t[i];n.prototype[i]=function(){var t=[this._wrapped];return v.apply(t,arguments),l.call(this,r.apply(n,t))}})};ht=0;n.uniqueId=function(n){var t=++ht+"";return n?n+t:t};n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var d=/(.)^/,pt={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},wt=/\\|'|\r|\n|\t|\u2028|\u2029/g;n.template=function(t,i,r){var f,e;r=n.defaults({},r,n.templateSettings);var h=new RegExp([(r.escape||d).source,(r.interpolate||d).source,(r.evaluate||d).source].join("|")+"|$","g"),o=0,u="__p+='";t.replace(h,function(n,i,r,f,e){return u+=t.slice(o,e).replace(wt,function(n){return"\\"+pt[n]}),i&&(u+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),r&&(u+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),f&&(u+="';\n"+f+"\n__p+='"),o=e+n.length,n});u+="';\n";r.variable||(u="with(obj||{}){\n"+u+"}\n");u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{f=new Function(r.variable||"obj","_",u)}catch(s){s.source=u;throw s;}return i?f(i,n):(e=function(t){return f.call(this,t,n)},e.source="function("+(r.variable||"obj")+"){\n"+u+"}",e)};n.chain=function(t){return n(t).chain()};l=function(t){return this._chain?n(t).chain():t};n.mixin(n);i(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=r[t];n.prototype[t]=function(){var n=this._wrapped;return i.apply(n,arguments),(t=="shift"||t=="splice")&&n.length===0&&delete n[0],l.call(this,n)}});i(["concat","join","slice"],function(t){var i=r[t];n.prototype[t]=function(){return l.call(this,i.apply(this._wrapped,arguments))}});n.extend(n.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(n){var t,i,r;n.Parse=n.Parse||{};t=n.Parse;typeof exports!="undefined"&&exports._?(t._=exports._.noConflict(),t.localStorage=require("localStorage"),t.XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest,exports.Parse=t):(t._=_.noConflict(),typeof localStorage!="undefined"&&(t.localStorage=localStorage),typeof XMLHttpRequest!="undefined"&&(t.XMLHttpRequest=XMLHttpRequest));typeof $!="undefined"&&(t.$=$);i=function(){};r=function(n,r,u){var f;return f=r&&r.hasOwnProperty("constructor")?r.constructor:function(){n.apply(this,arguments)},t._.extend(f,n),i.prototype=n.prototype,f.prototype=new i,r&&t._.extend(f.prototype,r),u&&t._.extend(f,u),f.prototype.constructor=f,f.__super__=n.prototype,f};t.serverURL="https://api.parse.com";typeof process!="undefined"&&process.versions&&process.versions.node&&(t._isNode=!0);t.initialize=function(n,i,r){if(r)throw"Parse.initialize() was passed a Master Key, which is only allowed from within Node.js.";t._initialize(n,i)};t._initialize=function(n,i,r){t.applicationId=n;t.javaScriptKey=i;t.masterKey=r;t._useMasterKey=!1};t._isNode&&(t.initialize=t._initialize,t.Cloud=t.Cloud||{},t.Cloud.useMasterKey=function(){t._useMasterKey=!0});t._getParsePath=function(n){if(!t.applicationId)throw"You need to call Parse.initialize before using Parse.";if(n||(n=""),!t._.isString(n))throw"Tried to get a localStorage path that wasn't a String.";return n[0]==="/"&&(n=n.substring(1)),"Parse/"+t.applicationId+"/"+n};t._installationId=null;t._getInstallationId=function(){var i,n;return t._installationId?t._installationId:(i=t._getParsePath("installationId"),t._installationId=t.localStorage.getItem(i),t._installationId&&t._installationId!==""||(n=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)},t._installationId=n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n(),t.localStorage.setItem(i,t._installationId)),t._installationId)};t._parseDate=function(n){var i=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$"),t=i.exec(n);if(!t)return null;var r=t[1]||0,u=(t[2]||1)-1,f=t[3]||0,e=t[4]||0,o=t[5]||0,s=t[6]||0,h=t[8]||0;return new Date(Date.UTC(r,u,f,e,o,s,h))};t._ajaxIE8=function(n,i,r){var f=new t.Promise,u=new XDomainRequest;return u.onload=function(){var n;try{n=JSON.parse(u.responseText)}catch(t){f.reject(t)}n&&f.resolve(n)},u.onerror=u.ontimeout=function(){var n={responseText:JSON.stringify({code:t.Error.X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};f.reject(n)},u.onprogress=function(){},u.open(n,i),u.send(r),f};t._useXDomainRequest=function(){return typeof XDomainRequest!="undefined"?"withCredentials"in new XMLHttpRequest?!1:!0:!1};t._ajax=function(n,i,r,u,f){var s={success:u,error:f};if(t._useXDomainRequest())return t._ajaxIE8(n,i,r)._thenRunCallbacks(s);var o=new t.Promise,h=!1,e=new t.XMLHttpRequest;return e.onreadystatechange=function(){if(e.readyState===4){if(h)return;if(h=!0,e.status>=200&&e.status<300){var n;try{n=JSON.parse(e.responseText)}catch(t){o.reject(t)}n&&o.resolve(n,e.status,e)}else o.reject(e)}},e.open(n,i,!0),e.setRequestHeader("Content-Type","text/plain"),t._isNode&&e.setRequestHeader("User-Agent","Parse/"+t.VERSION+" (NodeJS "+process.versions.node+")"),e.send(r),o._thenRunCallbacks(s)};t._extend=function(n,t){var i=r(this,n,t);return i.extend=this.extend,i};t._request=function(n){var i=n.route,h=n.className,c=n.objectId,f=n.method,s=n.useMasterKey,e=n.sessionToken,r=n.data,o,u,l;if(!t.applicationId)throw"You must specify your applicationId using Parse.initialize.";if(!t.javaScriptKey&&!t.masterKey)throw"You must specify a key using Parse.initialize.";if(e||(o=t.User.current(),o&&o._sessionToken&&(e=o._sessionToken)),i!=="batch"&&i!=="classes"&&i!=="events"&&i!=="files"&&i!=="functions"&&i!=="login"&&i!=="push"&&i!=="requestPasswordReset"&&i!=="rest_verify_analytics"&&i!=="users"&&i!=="jobs")throw"Bad route: '"+i+"'.";return u=t.serverURL,u.charAt(u.length-1)!=="/"&&(u+="/"),u+="1/"+i,h&&(u+="/"+h),c&&(u+="/"+c),r=t._.clone(r||{}),f!=="POST"&&(r._method=f,f="POST"),t._.isUndefined(s)&&(s=t._useMasterKey),r._ApplicationId=t.applicationId,s?r._MasterKey=t.masterKey:r._JavaScriptKey=t.javaScriptKey,r._ClientVersion=t.VERSION,r._InstallationId=t._getInstallationId(),e&&(r._SessionToken=e),l=JSON.stringify(r),t._ajax(f,u,l).then(null,function(n){var i,r;if(n&&n.responseText)try{r=JSON.parse(n.responseText);i=new t.Error(r.code,r.error)}catch(u){i=new t.Error(t.Error.INVALID_JSON,"Received an error with invalid JSON from Parse: "+n.responseText)}else i=new t.Error(t.Error.CONNECTION_FAILED,"XMLHttpRequest failed: "+JSON.stringify(n));return t.Promise.error(i)})};t._getValue=function(n,i){return(n&&n[i])?t._.isFunction(n[i])?n[i]():n[i]:null};t._encode=function(n,i,r){var u=t._,f;if(n instanceof t.Object){if(r)throw"Parse.Objects not allowed here";if(!i||u.include(i,n)||!n._hasData)return n._toPointer();if(!n.dirty())return i=i.concat(n),t._encode(n._toFullJSON(i),i,r);throw"Tried to save an object with a pointer to a new, unsaved object.";}if(n instanceof t.ACL)return n.toJSON();if(u.isDate(n))return{__type:"Date",iso:n.toJSON()};if(n instanceof t.GeoPoint)return n.toJSON();if(u.isArray(n))return u.map(n,function(n){return t._encode(n,i,r)});if(u.isRegExp(n))return n.source;if(n instanceof t.Relation||n instanceof t.Op)return n.toJSON();if(n instanceof t.File){if(!n.url())throw"Tried to save an object containing an unsaved file.";return{__type:"File",name:n.name(),url:n.url()}}return u.isObject(n)?(f={},t._objectEach(n,function(n,u){f[u]=t._encode(n,i,r)}),f):n};t._decode=function(n,i){var o=t._,r,s,u,f,e;return o.isObject(i)?o.isArray(i)?(t._arrayEach(i,function(n,r){i[r]=t._decode(r,n)}),i):i instanceof t.Object?i:i instanceof t.File?i:i instanceof t.Op?i:i.__op?t.Op._decode(i):i.__type==="Pointer"?(r=t.Object._create(i.className),r._finishFetch({objectId:i.objectId},!1),r):i.__type==="Object"?(s=i.className,delete i.__type,delete i.className,u=t.Object._create(s),u._finishFetch(i,!0),u):i.__type==="Date"?t._parseDate(i.iso):i.__type==="GeoPoint"?new t.GeoPoint({latitude:i.latitude,longitude:i.longitude}):n==="ACL"?i instanceof t.ACL?i:new t.ACL(i):i.__type==="Relation"?(f=new t.Relation(null,n),f.targetClassName=i.className,f):i.__type==="File"?(e=new t.File(i.name),e._url=i.url,e):(t._objectEach(i,function(n,r){i[r]=t._decode(r,n)}),i):i};t._arrayEach=t._.each;t._traverse=function(n,i,r){return n instanceof t.Object?(r=r||[],t._.indexOf(r,n)>=0)?void 0:(r.push(n),t._traverse(n.attributes,i,r),i(n)):n instanceof t.Relation||n instanceof t.File?i(n):t._.isArray(n)?(t._.each(n,function(u,f){var e=t._traverse(u,i,r);e&&(n[f]=e)}),i(n)):t._.isObject(n)?(t._each(n,function(u,f){var e=t._traverse(u,i,r);e&&(n[f]=e)}),i(n)):i(n)};t._objectEach=t._each=function(n,i){var r=t._;r.isObject(n)?r.each(r.keys(n),function(t){i(n[t],t)}):r.each(n,i)};t._isNullOrUndefined=function(n){return t._.isNull(n)||t._.isUndefined(n)}}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._;t.Analytics=t.Analytics||{};i.extend(t.Analytics,{track:function(n,r){if(n=n||"",n=n.replace(/^\s*/,""),n=n.replace(/\s*$/,""),n.length===0)throw"A name for the custom event must be provided";return i.each(r,function(n,t){if(!i.isString(t)||!i.isString(n))throw'track() dimensions expects keys and values of type "string".';}),t._request({route:"events",className:n,method:"POST",data:{dimensions:r}})}})}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._;t.Error=function(n,t){this.code=n;this.message=t};i.extend(t.Error,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,AGGREGATE_ERROR:600,FILE_READ_ERROR:601,X_DOMAIN_REQUEST:602})}(this),function(){var i=this,n=i.Parse||(i.Parse={}),t=/\s+/,r=Array.prototype.slice;n.Events={on:function(n,i,r){var o,u,f,s,e;if(!i)return this;for(n=n.split(t),o=this._callbacks||(this._callbacks={}),u=n.shift();u;)e=o[u],f=e?e.tail:{},f.next=s={},f.context=r,f.callback=i,o[u]={tail:s,next:e?e.next:f},u=n.shift();return this},off:function(n,i,r){var f,e,u,h,o,s;if(e=this._callbacks){if(!(n||i||r))return delete this._callbacks,this;for(n=n?n.split(t):_.keys(e),f=n.shift();f;)if(u=e[f],delete e[f],u&&(i||r)){for(h=u.tail,u=u.next;u!==h;){if(o=u.callback,s=u.context,i&&o!==i||r&&s!==r)this.on(f,o,s);u=u.next}f=n.shift()}return this}},trigger:function(n){var u,i,e,f,s,h,o;if(!(e=this._callbacks))return this;for(h=e.all,n=n.split(t),o=r.call(arguments,1),u=n.shift();u;){if(i=e[u],i)for(f=i.tail;(i=i.next)!==f;)i.callback.apply(i.context||this,o);if(i=h,i)for(f=i.tail,s=[u].concat(o);(i=i.next)!==f;)i.callback.apply(i.context||this,s);u=n.shift()}return this}};n.Events.bind=n.Events.on;n.Events.unbind=n.Events.off}.call(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._;t.GeoPoint=function(n,r){i.isArray(n)?(t.GeoPoint._validate(n[0],n[1]),this.latitude=n[0],this.longitude=n[1]):i.isObject(n)?(t.GeoPoint._validate(n.latitude,n.longitude),this.latitude=n.latitude,this.longitude=n.longitude):i.isNumber(n)&&i.isNumber(r)?(t.GeoPoint._validate(n,r),this.latitude=n,this.longitude=r):(this.latitude=0,this.longitude=0);var u=this;this.__defineGetter__&&this.__defineSetter__&&(this._latitude=this.latitude,this._longitude=this.longitude,this.__defineGetter__("latitude",function(){return u._latitude}),this.__defineGetter__("longitude",function(){return u._longitude}),this.__defineSetter__("latitude",function(n){t.GeoPoint._validate(n,u.longitude);u._latitude=n}),this.__defineSetter__("longitude",function(n){t.GeoPoint._validate(u.latitude,n);u._longitude=n}))};t.GeoPoint._validate=function(n,t){if(n<-90)throw"Parse.GeoPoint latitude "+n+" < -90.0.";if(n>90)throw"Parse.GeoPoint latitude "+n+" > 90.0.";if(t<-180)throw"Parse.GeoPoint longitude "+t+" < -180.0.";if(t>180)throw"Parse.GeoPoint longitude "+t+" > 180.0.";};t.GeoPoint.current=function(n){var i=new t.Promise;return navigator.geolocation.getCurrentPosition(function(n){i.resolve(new t.GeoPoint({latitude:n.coords.latitude,longitude:n.coords.longitude}))},function(n){i.reject(n)}),i._thenRunCallbacks(n)};t.GeoPoint.prototype={toJSON:function(){return t.GeoPoint._validate(this.latitude,this.longitude),{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(n){var t=Math.PI/180,r=this.latitude*t,o=this.longitude*t,u=n.latitude*t,s=n.longitude*t,h=r-u,c=o-s,f=Math.sin(h/2),e=Math.sin(c/2),i=f*f+Math.cos(r)*Math.cos(u)*e*e;return i=Math.min(1,i),2*Math.asin(Math.sqrt(i))},kilometersTo:function(n){return this.radiansTo(n)*6371},milesTo:function(n){return this.radiansTo(n)*3958.8}}}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._,r="*";t.ACL=function(n){var r=this;if(r.permissionsById={},i.isObject(n))if(n instanceof t.User)r.setReadAccess(n,!0),r.setWriteAccess(n,!0);else{if(i.isFunction(n))throw"Parse.ACL() called with a function.  Did you forget ()?";t._objectEach(n,function(n,u){if(!i.isString(u))throw"Tried to create an ACL with an invalid userId.";r.permissionsById[u]={};t._objectEach(n,function(n,t){if(t!=="read"&&t!=="write")throw"Tried to create an ACL with an invalid permission type.";if(!i.isBoolean(n))throw"Tried to create an ACL with an invalid permission value.";r.permissionsById[u][t]=n})})}};t.ACL.prototype.toJSON=function(){return i.clone(this.permissionsById)};t.ACL.prototype._setAccess=function(n,r,u){if(r instanceof t.User?r=r.id:r instanceof t.Role&&(r="role:"+r.getName()),!i.isString(r))throw"userId must be a string.";if(!i.isBoolean(u))throw"allowed must be either true or false.";var f=this.permissionsById[r];if(!f)if(u)f={},this.permissionsById[r]=f;else return;u?this.permissionsById[r][n]=!0:(delete f[n],i.isEmpty(f)&&delete f[r])};t.ACL.prototype._getAccess=function(n,i){i instanceof t.User?i=i.id:i instanceof t.Role&&(i="role:"+i.getName());var r=this.permissionsById[i];return r?r[n]?!0:!1:!1};t.ACL.prototype.setReadAccess=function(n,t){this._setAccess("read",n,t)};t.ACL.prototype.getReadAccess=function(n){return this._getAccess("read",n)};t.ACL.prototype.setWriteAccess=function(n,t){this._setAccess("write",n,t)};t.ACL.prototype.getWriteAccess=function(n){return this._getAccess("write",n)};t.ACL.prototype.setPublicReadAccess=function(n){this.setReadAccess(r,n)};t.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(r)};t.ACL.prototype.setPublicWriteAccess=function(n){this.setWriteAccess(r,n)};t.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(r)};t.ACL.prototype.getRoleReadAccess=function(n){if(n instanceof t.Role&&(n=n.getName()),i.isString(n))return this.getReadAccess("role:"+n);throw"role must be a Parse.Role or a String";};t.ACL.prototype.getRoleWriteAccess=function(n){if(n instanceof t.Role&&(n=n.getName()),i.isString(n))return this.getWriteAccess("role:"+n);throw"role must be a Parse.Role or a String";};t.ACL.prototype.setRoleReadAccess=function(n,r){if(n instanceof t.Role&&(n=n.getName()),i.isString(n)){this.setReadAccess("role:"+n,r);return}throw"role must be a Parse.Role or a String";};t.ACL.prototype.setRoleWriteAccess=function(n,r){if(n instanceof t.Role&&(n=n.getName()),i.isString(n)){this.setWriteAccess("role:"+n,r);return}throw"role must be a Parse.Role or a String";}}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._;t.Op=function(){this._initialize.apply(this,arguments)};t.Op.prototype={_initialize:function(){}};i.extend(t.Op,{_extend:t._extend,_opDecoderMap:{},_registerDecoder:function(n,i){t.Op._opDecoderMap[n]=i},_decode:function(n){var i=t.Op._opDecoderMap[n.__op];return i?i(n):undefined}});t.Op._registerDecoder("Batch",function(n){var i=null;return t._arrayEach(n.ops,function(n){n=t.Op._decode(n);i=n._mergeWithPrevious(i)}),i});t.Op.Set=t.Op._extend({_initialize:function(n){this._value=n},value:function(){return this._value},toJSON:function(){return t._encode(this.value())},_mergeWithPrevious:function(){return this},_estimate:function(){return this.value()}});t.Op._UNSET={};t.Op.Unset=t.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(){return this},_estimate:function(){return t.Op._UNSET}});t.Op._registerDecoder("Delete",function(){return new t.Op.Unset});t.Op.Increment=t.Op._extend({_initialize:function(n){this._amount=n},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(n){if(n){if(n instanceof t.Op.Unset)return new t.Op.Set(this.amount());if(n instanceof t.Op.Set)return new t.Op.Set(n.value()+this.amount());if(n instanceof t.Op.Increment)return new t.Op.Increment(this.amount()+n.amount());throw"Op is invalid after previous op.";}else return this},_estimate:function(n){return n?n+this.amount():this.amount()}});t.Op._registerDecoder("Increment",function(n){return new t.Op.Increment(n.amount)});t.Op.Add=t.Op._extend({_initialize:function(n){this._objects=n},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:t._encode(this.objects())}},_mergeWithPrevious:function(n){if(n){if(n instanceof t.Op.Unset)return new t.Op.Set(this.objects());if(n instanceof t.Op.Set)return new t.Op.Set(this._estimate(n.value()));if(n instanceof t.Op.Add)return new t.Op.Add(n.objects().concat(this.objects()));throw"Op is invalid after previous op.";}else return this},_estimate:function(n){return n?n.concat(this.objects()):i.clone(this.objects())}});t.Op._registerDecoder("Add",function(n){return new t.Op.Add(t._decode(undefined,n.objects))});t.Op.AddUnique=t.Op._extend({_initialize:function(n){this._objects=i.uniq(n)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:t._encode(this.objects())}},_mergeWithPrevious:function(n){if(n){if(n instanceof t.Op.Unset)return new t.Op.Set(this.objects());if(n instanceof t.Op.Set)return new t.Op.Set(this._estimate(n.value()));if(n instanceof t.Op.AddUnique)return new t.Op.AddUnique(this._estimate(n.objects()));throw"Op is invalid after previous op.";}else return this},_estimate:function(n){if(n){var r=i.clone(n);return t._arrayEach(this.objects(),function(n){var u,f;n instanceof t.Object&&n.id?(u=i.find(r,function(i){return i instanceof t.Object&&i.id===n.id}),u?(f=i.indexOf(r,u),r[f]=n):r.push(n)):i.contains(r,n)||r.push(n)}),r}return i.clone(this.objects())}});t.Op._registerDecoder("AddUnique",function(n){return new t.Op.AddUnique(t._decode(undefined,n.objects))});t.Op.Remove=t.Op._extend({_initialize:function(n){this._objects=i.uniq(n)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:t._encode(this.objects())}},_mergeWithPrevious:function(n){if(n){if(n instanceof t.Op.Unset)return n;if(n instanceof t.Op.Set)return new t.Op.Set(this._estimate(n.value()));if(n instanceof t.Op.Remove)return new t.Op.Remove(i.union(n.objects(),this.objects()));throw"Op is invalid after previous op.";}else return this},_estimate:function(n){if(n){var r=i.difference(n,this.objects());return t._arrayEach(this.objects(),function(n){n instanceof t.Object&&n.id&&(r=i.reject(r,function(i){return i instanceof t.Object&&i.id===n.id}))}),r}return[]}});t.Op._registerDecoder("Remove",function(n){return new t.Op.Remove(t._decode(undefined,n.objects))});t.Op.Relation=t.Op._extend({_initialize:function(n,r){this._targetClassName=null;var u=this,f=function(n){if(n instanceof t.Object){if(!n.id)throw"You can't add an unsaved Parse.Object to a relation.";if(u._targetClassName||(u._targetClassName=n.className),u._targetClassName!==n.className)throw"Tried to create a Parse.Relation with 2 different types: "+u._targetClassName+" and "+n.className+".";return n.id}return n};this.relationsToAdd=i.uniq(i.map(n,f));this.relationsToRemove=i.uniq(i.map(r,f))},added:function(){var n=this;return i.map(this.relationsToAdd,function(i){var r=t.Object._create(n._targetClassName);return r.id=i,r})},removed:function(){var n=this;return i.map(this.relationsToRemove,function(i){var r=t.Object._create(n._targetClassName);return r.id=i,r})},toJSON:function(){var n=null,t=null,f=this,u=function(n){return{__type:"Pointer",className:f._targetClassName,objectId:n}},r=null;return(this.relationsToAdd.length>0&&(r=i.map(this.relationsToAdd,u),n={__op:"AddRelation",objects:r}),this.relationsToRemove.length>0&&(r=i.map(this.relationsToRemove,u),t={__op:"RemoveRelation",objects:r}),n&&t)?{__op:"Batch",ops:[n,t]}:n||t||{}},_mergeWithPrevious:function(n){if(n)if(n instanceof t.Op.Unset)throw"You can't modify a relation after deleting it.";else{if(n instanceof t.Op.Relation){if(n._targetClassName&&n._targetClassName!==this._targetClassName)throw"Related object must be of class "+n._targetClassName+", but "+this._targetClassName+" was passed in.";var u=i.union(i.difference(n.relationsToAdd,this.relationsToRemove),this.relationsToAdd),f=i.union(i.difference(n.relationsToRemove,this.relationsToAdd),this.relationsToRemove),r=new t.Op.Relation(u,f);return r._targetClassName=this._targetClassName,r}throw"Op is invalid after previous op.";}else return this},_estimate:function(n,i,r){if(n){if(n instanceof t.Relation){if(this._targetClassName)if(n.targetClassName){if(n.targetClassName!==this._targetClassName)throw"Related object must be a "+n.targetClassName+", but a "+this._targetClassName+" was passed in.";}else n.targetClassName=this._targetClassName;return n}throw"Op is invalid after previous op.";}else{var u=new t.Relation(i,r);u.targetClassName=this._targetClassName}}});t.Op._registerDecoder("AddRelation",function(n){return new t.Op.Relation(t._decode(undefined,n.objects),[])});t.Op._registerDecoder("RemoveRelation",function(n){return new t.Op.Relation([],t._decode(undefined,n.objects))})}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._;t.Relation=function(n,t){this.parent=n;this.key=t;this.targetClassName=null};t.Relation.prototype={_ensureParentAndKey:function(n,t){if(this.parent=this.parent||n,this.key=this.key||t,this.parent!==n)throw"Internal Error. Relation retrieved from two different Objects.";if(this.key!==t)throw"Internal Error. Relation retrieved from two different keys.";},add:function(n){i.isArray(n)||(n=[n]);var r=new t.Op.Relation(n,[]);this.parent.set(this.key,r);this.targetClassName=r._targetClassName},remove:function(n){i.isArray(n)||(n=[n]);var r=new t.Op.Relation([],n);this.parent.set(this.key,r);this.targetClassName=r._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var i,n;return this.targetClassName?(i=t.Object._getSubclass(this.targetClassName),n=new t.Query(i)):(i=t.Object._getSubclass(this.parent.className),n=new t.Query(i),n._extraOptions.redirectClassNameForKey=this.key),n._addCondition("$relatedTo","object",this.parent._toPointer()),n._addCondition("$relatedTo","key",this.key),n}}}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._;t.Promise=function(){this._resolved=!1;this._rejected=!1;this._resolvedCallbacks=[];this._rejectedCallbacks=[]};i.extend(t.Promise,{is:function(n){return n&&n.then&&i.isFunction(n.then)},as:function(){var n=new t.Promise;return n.resolve.apply(n,arguments),n},error:function(){var n=new t.Promise;return n.reject.apply(n,arguments),n},when:function(n){var i,u,e;i=n&&t._isNullOrUndefined(n.length)?arguments:n;var f=i.length,s=!1,r=[],o=[];return(r.length=i.length,o.length=i.length,f===0)?t.Promise.as.apply(this,r):(u=new t.Promise,e=function(){f=f-1;f===0&&(s?u.reject(o):u.resolve.apply(u,r))},t._arrayEach(i,function(n,i){t.Promise.is(n)?n.then(function(n){r[i]=n;e()},function(n){o[i]=n;s=!0;e()}):(r[i]=n,e())}),u)},_continueWhile:function(n,i){return n()?i().then(function(){return t.Promise._continueWhile(n,i)}):t.Promise.as()}});i.extend(t.Promise.prototype,{resolve:function(){if(this._resolved||this._rejected)throw"A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+".";this._resolved=!0;this._result=arguments;var n=arguments;t._arrayEach(this._resolvedCallbacks,function(t){t.apply(this,n)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},reject:function(n){if(this._resolved||this._rejected)throw"A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+".";this._rejected=!0;this._error=n;t._arrayEach(this._rejectedCallbacks,function(t){t(n)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},then:function(n,i){var r=new t.Promise,u=function(){var i=arguments;n&&(i=[n.apply(this,i)]);i.length===1&&t.Promise.is(i[0])?i[0].then(function(){r.resolve.apply(r,arguments)},function(n){r.reject(n)}):r.resolve.apply(r,i)},f=function(n){var u=[];i?(u=[i(n)],u.length===1&&t.Promise.is(u[0])?u[0].then(function(){r.resolve.apply(r,arguments)},function(n){r.reject(n)}):r.reject(u[0])):r.reject(n)};return this._resolved?u.apply(this,this._result):this._rejected?f(this._error):(this._resolvedCallbacks.push(u),this._rejectedCallbacks.push(f)),r},always:function(n){return this.then(n,n)},done:function(n){return this.then(n)},fail:function(n){return this.then(null,n)},_thenRunCallbacks:function(n,r){var u,f;return i.isFunction(n)?(f=n,u={success:function(n){f(n,null)},error:function(n){f(null,n)}}):u=i.clone(n),u=u||{},this.then(function(n){return u.success?u.success.apply(this,arguments):r&&r.trigger("sync",r,n,u),t.Promise.as.apply(t.Promise,arguments)},function(n){return u.error?i.isUndefined(r)?u.error(n):u.error(r,n):r&&r.trigger("error",r,n,u),t.Promise.error(n)})},_continueWith:function(n){return this.then(function(){return n(arguments,null)},function(t){return n(null,t)})}})}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,r=t._,i=function(n){if(n<26)return String.fromCharCode(65+n);if(n<52)return String.fromCharCode(n- -71);if(n<62)return String.fromCharCode(n-4);if(n===62)return"+";if(n===63)return"/";throw"Tried to encode large digit "+n+" in base64.";},u=function(n){var t=[];return t.length=Math.ceil(n.length/3),r.times(t.length,function(r){var u=n[r*3],f=n[r*3+1]||0,e=n[r*3+2]||0,o=r*3+1<n.length,s=r*3+2<n.length;t[r]=[i(u>>2&63),i(u<<4&48|f>>4&15),o?i(f<<2&60|e>>6&3):"=",s?i(e&63):"="].join("")}),t.join("")},f={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"},e=function(n,i){var u=new t.Promise,r;return typeof FileReader=="undefined"?t.Promise.error(new t.Error(t.Error.FILE_READ_ERROR,"Attempted to use a FileReader on an unsupported browser.")):(r=new FileReader,r.onloadend=function(){if(r.readyState!==2){u.reject(new t.Error(t.Error.FILE_READ_ERROR,"Error reading file."));return}var f=r.result,n=/^data:([^;]*);base64,(.*)$/.exec(f);if(!n){u.reject(new t.Error(t.ERROR.FILE_READ_ERROR,"Unable to interpret data URL: "+f));return}u.resolve(n[2],i||n[1])},r.readAsDataURL(n),u)};t.File=function(n,i,o){var h,c,l,s;if(this._name=n,h=/\.([^.]*)$/.exec(n),h&&(h=h[1].toLowerCase()),c=o||f[h]||"text/plain",r.isArray(i))this._source=t.Promise.as(u(i),c);else if(i&&i.base64)l=/^data:([a-zA-Z]*\/[a-zA-Z+.-]*);(charset=[a-zA-Z0-9\-\/\s]*,)?base64,(\S+)/,s=l.exec(i.base64),this._source=s&&s.length>0?t.Promise.as(s.length===4?s[3]:s[2],s[1]):t.Promise.as(i.base64,c);else if(typeof File!="undefined"&&i instanceof File)this._source=e(i,o);else if(r.isString(i))throw"Creating a Parse.File from a String is not yet supported.";};t.File.prototype={name:function(){return this._name},url:function(){return this._url},save:function(n){n=n||{};var i=this;return i._previousSave||(i._previousSave=i._source.then(function(r,u){var f={base64:r,_ContentType:u};return t._request({route:"files",className:i._name,method:"POST",data:f,useMasterKey:n.useMasterKey})}).then(function(n){return i._name=n.name,i._url=n.url,i})),i._previousSave._thenRunCallbacks(n)}}}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._;t.Object=function(n,r){if(i.isString(n))return t.Object._create.apply(this,arguments);n=n||{};r&&r.parse&&(n=this.parse(n));var u=t._getValue(this,"defaults");if(u&&(n=i.extend({},u,n)),r&&r.collection&&(this.collection=r.collection),this._serverData={},this._opSetQueue=[{}],this.attributes={},this._hashedJSON={},this._escapedAttributes={},this.cid=i.uniqueId("c"),this.changed={},this._silent={},this._pending={},!this.set(n,{silent:!0}))throw new Error("Can't create an invalid Parse.Object");this.changed={};this._silent={};this._pending={};this._hasData=!0;this._previousAttributes=i.clone(this.attributes);this.initialize.apply(this,arguments)};t.Object.saveAll=function(n,i){return i=i||{},t.Object._deepSaveAsync(n,{useMasterKey:i.useMasterKey})._thenRunCallbacks(i)};t.Object.destroyAll=function(n,r){r=r||{};var o=function(n){n.trigger("destroy",n,n.collection,r)},f=[],s=function(n){var u=t.Promise.as();return n.length>0&&(u=u.then(function(){return t._request({route:"batch",method:"POST",useMasterKey:r.useMasterKey,data:{requests:i.map(n,function(n){return{method:"DELETE",path:"/1/classes/"+n.className+"/"+n.id}})}})}).then(function(i){t._arrayEach(n,function(n,u){if(i[u].success&&r.wait)o(n);else if(i[u].error){var e=new t.Error(i[u].error.code,i[u].error.error);e.object=n;f.push(e)}})})),u},e=t.Promise.as(),u=[];return t._arrayEach(n,function(t,i){if(t.id&&r.wait||o(t),t.id&&u.push(t),u.length===20||i+1===n.length){var f=u;u=[];e=e.then(function(){return s(f)})}}),e.then(function(){if(f.length===0)return!0;var n=new t.Error(t.Error.AGGREGATE_ERROR,"Error deleting an object in destroyAll");return n.errors=f,t.Promise.error(n)})._thenRunCallbacks(r)};t.Object.fetchAll=function(n,i){return t.Object._fetchAll(n,!0)._thenRunCallbacks(i)};t.Object.fetchAllIfNeeded=function(n,i){return t.Object._fetchAll(n,!1)._thenRunCallbacks(i)};i.extend(t.Object.prototype,t.Events,{_existed:!1,initialize:function(){},toJSON:function(){var n=this._toFullJSON();return t._arrayEach(["__type","className"],function(t){delete n[t]}),n},_toFullJSON:function(n){var r=i.clone(this.attributes);return t._objectEach(r,function(i,u){r[u]=t._encode(i,n)}),t._objectEach(this._operations,function(n,t){r[t]=n}),i.has(this,"id")&&(r.objectId=this.id),i.has(this,"createdAt")&&(r.createdAt=i.isDate(this.createdAt)?this.createdAt.toJSON():this.createdAt),i.has(this,"updatedAt")&&(r.updatedAt=i.isDate(this.updatedAt)?this.updatedAt.toJSON():this.updatedAt),r.__type="Object",r.className=this.className,r},_refreshCache:function(){var n=this;n._refreshingCache||(n._refreshingCache=!0,t._objectEach(this.attributes,function(r,u){r instanceof t.Object?r._refreshCache():i.isObject(r)&&n._resetCacheForKey(u)&&n.set(u,new t.Op.Set(r),{silent:!0})}),delete n._refreshingCache)},dirty:function(n){this._refreshCache();var t=i.last(this._opSetQueue);return n?t[n]?!0:!1:this.id?i.keys(t).length>0?!0:!1:!0},dirtyKeys:function(){return i.keys(i.last(this._opSetQueue))},_toPointer:function(){if(!this.id)throw new Error("Can't serialize an unsaved Parse.Object");return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(n){return this.attributes[n]},relation:function(n){var i=this.get(n);if(i){if(!(i instanceof t.Relation))throw"Called relation() on non-relation field "+n;return i._ensureParentAndKey(this,n),i}return new t.Relation(this,n)},escape:function(n){var f=this._escapedAttributes[n],r,u;return f?f:(r=this.attributes[n],u=t._isNullOrUndefined(r)?"":i.escape(r.toString()),this._escapedAttributes[n]=u,u)},has:function(n){return!t._isNullOrUndefined(this.attributes[n])},_mergeMagicFields:function(n){var r=this;t._arrayEach(["id","objectId","createdAt","updatedAt"],function(u){n[u]&&(u==="objectId"?r.id=n[u]:r[u]=u!=="createdAt"&&u!=="updatedAt"||i.isDate(n[u])?n[u]:t._parseDate(n[u]),delete n[u])})},_copyServerData:function(n){var i={};t._objectEach(n,function(n,r){i[r]=t._decode(r,n)});this._serverData=i;this._rebuildAllEstimatedData();this._refreshCache();this._opSetQueue=[{}];this._rebuildAllEstimatedData()},_mergeFromObject:function(n){n&&(this.id=n.id,this.createdAt=n.createdAt,this.updatedAt=n.updatedAt,this._copyServerData(n._serverData),this._hasData=!0)},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var u=this,r=i.first(this._opSetQueue),n;this._opSetQueue=i.rest(this._opSetQueue);n=i.first(this._opSetQueue);t._objectEach(r,function(t,i){var u=r[i],f=n[i];u&&f?n[i]=f._mergeWithPrevious(u):u&&(n[i]=u)});this._saving=this._saving-1},_finishSave:function(n){var u={},f,r;t._traverse(this.attributes,function(n){n instanceof t.Object&&n.id&&n._hasData&&(u[n.id]=n)});f=i.first(this._opSetQueue);this._opSetQueue=i.rest(this._opSetQueue);this._applyOpSet(f,this._serverData);this._mergeMagicFields(n);r=this;t._objectEach(n,function(n,i){r._serverData[i]=t._decode(i,n);var f=t._traverse(r._serverData[i],function(n){if(n instanceof t.Object&&u[n.id])return u[n.id]});f&&(r._serverData[i]=f)});this._rebuildAllEstimatedData();this._saving=this._saving-1},_finishFetch:function(n,t){this._opSetQueue=[{}];this._mergeMagicFields(n);this._copyServerData(n);this._hasData=t},_applyOpSet:function(n,i){var r=this;t._objectEach(n,function(n,u){i[u]=n._estimate(i[u],r,u);i[u]===t.Op._UNSET&&delete i[u]})},_resetCacheForKey:function(n){var r=this.attributes[n],u;return i.isObject(r)&&!(r instanceof t.Object)&&!(r instanceof t.File)&&(r=r.toJSON?r.toJSON():r,u=JSON.stringify(r),this._hashedJSON[n]!==u)?(this._hashedJSON[n]=u,!0):!1},_rebuildEstimatedDataForKey:function(n){var i=this;delete this.attributes[n];this._serverData[n]&&(this.attributes[n]=this._serverData[n]);t._arrayEach(this._opSetQueue,function(r){var u=r[n];u&&(i.attributes[n]=u._estimate(i.attributes[n],i,n),i.attributes[n]===t.Op._UNSET?delete i.attributes[n]:i._resetCacheForKey(n))})},_rebuildAllEstimatedData:function(){var n=this,r=i.clone(this.attributes);this.attributes=i.clone(this._serverData);t._arrayEach(this._opSetQueue,function(i){n._applyOpSet(i,n.attributes);t._objectEach(i,function(t,i){n._resetCacheForKey(i)})});t._objectEach(r,function(t,i){n.attributes[i]!==t&&n.trigger("change:"+i,n,n.attributes[i],{})});t._objectEach(this.attributes,function(t,u){i.has(r,u)||n.trigger("change:"+u,n,t,{})})},set:function(n,r,u){var f,o,e,s,h;return(i.isObject(n)||t._isNullOrUndefined(n)?(f=n,t._objectEach(f,function(n,i){f[i]=t._decode(i,n)}),u=r):(f={},f[n]=t._decode(n,r)),u=u||{},!f)?this:(f instanceof t.Object&&(f=f.attributes),u.unset&&t._objectEach(f,function(n,i){f[i]=new t.Op.Unset}),o=i.clone(f),e=this,t._objectEach(o,function(n,i){n instanceof t.Op&&(o[i]=n._estimate(e.attributes[i],e,i),o[i]===t.Op._UNSET&&delete o[i])}),!this._validate(f,u))?!1:(this._mergeMagicFields(f),u.changes={},s=this._escapedAttributes,h=this._previousAttributes||{},t._arrayEach(i.keys(f),function(n){var r=f[n],o,h;r instanceof t.Relation&&(r.parent=e);r instanceof t.Op||(r=new t.Op.Set(r));o=!0;r instanceof t.Op.Set&&i.isEqual(e.attributes[n],r.value)&&(o=!1);o&&(delete s[n],u.silent?e._silent[n]=!0:u.changes[n]=!0);h=i.last(e._opSetQueue);h[n]=r._mergeWithPrevious(h[n]);e._rebuildEstimatedDataForKey(n);o?(e.changed[n]=e.attributes[n],u.silent||(e._pending[n]=!0)):(delete e.changed[n],delete e._pending[n])}),u.silent||this.change(u),this)},unset:function(n,t){return t=t||{},t.unset=!0,this.set(n,null,t)},increment:function(n,r){return(i.isUndefined(r)||i.isNull(r))&&(r=1),this.set(n,new t.Op.Increment(r))},add:function(n,i){return this.set(n,new t.Op.Add([i]))},addUnique:function(n,i){return this.set(n,new t.Op.AddUnique([i]))},remove:function(n,i){return this.set(n,new t.Op.Remove([i]))},op:function(n){return i.last(this._opSetQueue)[n]},clear:function(n){n=n||{};n.unset=!0;var t=i.extend(this.attributes,this._operations);return this.set(t,n)},_getSaveJSON:function(){var n=i.clone(i.first(this._opSetQueue));return t._objectEach(n,function(t,i){n[i]=t.toJSON()}),n},_canBeSerialized:function(){return t.Object._canBeSerializedAsValue(this.attributes)},fetch:function(n){var i=this,r;return n=n||{},r=t._request({method:"GET",route:"classes",className:this.className,objectId:this.id,useMasterKey:n.useMasterKey}),r.then(function(n,t,r){return i._finishFetch(i.parse(n,t,r),!0),i})._thenRunCallbacks(n,this)},save:function(n,r,u){var o,a,e,v,h,s,y,f,c,l;return(i.isObject(n)||t._isNullOrUndefined(n)?(o=n,e=r):(o={},o[n]=r,e=u),!e&&o&&(v=i.reject(o,function(n,t){return i.include(["success","error","wait"],t)}),v.length===0&&(h=!0,i.has(o,"success")&&!i.isFunction(o.success)&&(h=!1),i.has(o,"error")&&!i.isFunction(o.error)&&(h=!1),h)))?this.save(null,o):(e=i.clone(e)||{},e.wait&&(a=i.clone(this.attributes)),s=i.clone(e)||{},s.wait&&(s.silent=!0),s.error=function(n,t){y=t},o&&!this.set(o,s))?t.Promise.error(y)._thenRunCallbacks(e,this):(f=this,f._refreshCache(),c=[],l=[],t.Object._findUnsavedChildren(f.attributes,c,l),c.length+l.length>0)?t.Object._deepSaveAsync(this.attributes,{useMasterKey:e.useMasterKey}).then(function(){return f.save(null,e)},function(n){return t.Promise.error(n)._thenRunCallbacks(e,f)}):(this._startSave(),this._saving=(this._saving||0)+1,this._allPreviousSaves=this._allPreviousSaves||t.Promise.as(),this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var h=f.id?"PUT":"POST",c=f._getSaveJSON(),n="classes",r=f.className,u;return f.className!=="_User"||f.id||(n="users",r=null),u=t._request({route:n,className:r,objectId:f.id,method:h,useMasterKey:e.useMasterKey,data:c}),u.then(function(n,t,r){var u=f.parse(n,t,r);return e.wait&&(u=i.extend(o||{},u)),f._finishSave(u),e.wait&&f.set(a,s),f},function(n){return f._cancelSave(),t.Promise.error(n)})._thenRunCallbacks(e,f)}),this._allPreviousSaves)},destroy:function(n){var i,r,u;return(n=n||{},i=this,r=function(){i.trigger("destroy",i,i.collection,n)},!this.id)?r():(n.wait||r(),u=t._request({route:"classes",className:this.className,objectId:this.id,method:"DELETE",useMasterKey:n.useMasterKey}),u.then(function(){return n.wait&&r(),i})._thenRunCallbacks(n,this))},parse:function(n,r){var u=i.clone(n);return i(["createdAt","updatedAt"]).each(function(n){u[n]&&(u[n]=t._parseDate(u[n]))}),u.updatedAt||(u.updatedAt=u.createdAt),r&&(this._existed=r!==201),u},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.id},change:function(n){var u,r,f,e;if(n=n||{},u=this._changing,this._changing=!0,r=this,t._objectEach(this._silent,function(n){r._pending[n]=!0}),f=i.extend({},n.changes,this._silent),this._silent={},t._objectEach(f,function(t,i){r.trigger("change:"+i,r,r.get(i),n)}),u)return this;for(e=function(n,t){r._pending[t]||r._silent[t]||delete r.changed[t]};!i.isEmpty(this._pending);)this._pending={},this.trigger("change",this,n),t._objectEach(this.changed,e),r._previousAttributes=i.clone(this.attributes);return this._changing=!1,this},existed:function(){return this._existed},hasChanged:function(n){return arguments.length?this.changed&&i.has(this.changed,n):!i.isEmpty(this.changed)},changedAttributes:function(n){if(!n)return this.hasChanged()?i.clone(this.changed):!1;var r={},u=this._previousAttributes;return t._objectEach(n,function(n,t){i.isEqual(u[t],n)||(r[t]=n)}),r},previous:function(n){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[n]},previousAttributes:function(){return i.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},validate:function(n){if(i.has(n,"ACL")&&!(n.ACL instanceof t.ACL))return new t.Error(t.Error.OTHER_CAUSE,"ACL must be a Parse.ACL.");var r=!0;return(t._objectEach(n,function(n,t){/^[A-Za-z][0-9A-Za-z_]*$/.test(t)||(r=!1)}),!r)?new t.Error(t.Error.INVALID_KEY_NAME):!1},_validate:function(n,t){if(t.silent||!this.validate)return!0;n=i.extend({},this.attributes,n);var r=this.validate(n,t);return r?(t&&t.error?t.error(this,r,t):this.trigger("error",this,r,t),!1):!0},getACL:function(){return this.get("ACL")},setACL:function(n,t){return this.set("ACL",n,t)}});t.Object._getSubclass=function(n){if(!i.isString(n))throw"Parse.Object._getSubclass requires a string argument.";var r=t.Object._classMap[n];return r||(r=t.Object.extend(n),t.Object._classMap[n]=r),r};t.Object._create=function(n,i,r){var u=t.Object._getSubclass(n);return new u(i,r)};t.Object._toObjectIdArray=function(n,i){var u,o,e,f,r;if(n.length===0)return t.Promise.as(n);for(o=n[0].className,e=[],f=0;f<n.length;f++){if(r=n[f],o!==r.className)return u=new t.Error(t.Error.INVALID_CLASS_NAME,"All objects should be of the same class"),t.Promise.error(u);if(r.id){if(i&&r._hasData)continue}else return u=new t.Error(t.Error.MISSING_OBJECT_ID,"All objects must have an ID"),t.Promise.error(u);e.push(r.id)}return t.Promise.as(e)};t.Object._updateWithFetchedResults=function(n,i,r){var o={},u,f,e,s;for(t._arrayEach(i,function(n){o[n.id]=n}),u=0;u<n.length;u++){if(f=n[u],e=o[f.id],!e&&r)return s=new t.Error(t.Error.OBJECT_NOT_FOUND,"All objects must exist on the server"),t.Promise.error(s);f._mergeFromObject(e)}return t.Promise.as(n)};t.Object._fetchAll=function(n,i){if(n.length===0)return t.Promise.as(n);var r=!i;return t.Object._toObjectIdArray(n,r).then(function(i){var u=n[0].className,r=new t.Query(u);return r.containedIn("objectId",i),r.limit=i.length,r.find()}).then(function(r){return t.Object._updateWithFetchedResults(n,r,i)})};t.Object._classMap={};t.Object._extend=t._extend;t.Object.extend=function(n,r,u){var f,e;if(!i.isString(n)){if(n&&i.has(n,"className"))return t.Object.extend(n.className,n,r);throw new Error("Parse.Object.extend's first argument should be the className.");}return n==="User"&&t.User._performUserRewrite&&(n="_User"),r=r||{},r.className=n,f=null,i.has(t.Object._classMap,n)?(e=t.Object._classMap[n],f=e._extend(r,u)):f=this._extend(r,u),f.extend=function(r){if(i.isString(r)||r&&i.has(r,"className"))return t.Object.extend.apply(f,arguments);var u=[n].concat(t._.toArray(arguments));return t.Object.extend.apply(f,u)},t.Object._classMap[n]=f,f};t.Object._findUnsavedChildren=function(n,i,r){t._traverse(n,function(n){if(n instanceof t.Object){n._refreshCache();n.dirty()&&i.push(n);return}if(n instanceof t.File){n.url()||r.push(n);return}})};t.Object._canBeSerializedAsValue=function(n){if(n instanceof t.Object)return!!n.id;if(n instanceof t.File)return!0;var r=!0;return i.isArray(n)?t._arrayEach(n,function(n){t.Object._canBeSerializedAsValue(n)||(r=!1)}):i.isObject(n)&&t._objectEach(n,function(n){t.Object._canBeSerializedAsValue(n)||(r=!1)}),r};t.Object._deepSaveAsync=function(n,r){var e=[],o=[],u,s,f;return t.Object._findUnsavedChildren(n,e,o),u=t.Promise.as(),i.each(o,function(n){u=u.then(function(){return n.save(r)})}),s=i.uniq(e),f=i.uniq(s),u.then(function(){return t.Promise._continueWhile(function(){return f.length>0},function(){var n=[],e=[],o,u;return(t._arrayEach(f,function(t){if(n.length>20){e.push(t);return}t._canBeSerialized()?n.push(t):e.push(t)}),f=e,n.length===0)?t.Promise.error(new t.Error(t.Error.OTHER_CAUSE,"Tried to save a batch with a cycle.")):(o=t.Promise.when(i.map(n,function(n){return n._allPreviousSaves||t.Promise.as()})),u=new t.Promise,t._arrayEach(n,function(n){n._allPreviousSaves=u}),o._continueWith(function(){return t._request({route:"batch",method:"POST",useMasterKey:r.useMasterKey,data:{requests:i.map(n,function(n){var r=n._getSaveJSON(),i="POST",t="/1/classes/"+n.className;return n.id&&(t=t+"/"+n.id,i="PUT"),n._startSave(),{method:i,path:t,body:r}})}}).then(function(i,r,u){var f;return t._arrayEach(n,function(n,t){i[t].success?n._finishSave(n.parse(i[t].success,r,u)):(f=f||i[t].error,n._cancelSave())}),f?t.Promise.error(new t.Error(f.code,f.error)):void 0}).then(function(n){return u.resolve(n),n},function(n){return u.reject(n),t.Promise.error(n)})}))})}).then(function(){return n})}}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._;t.Role=t.Object.extend("_Role",{constructor:function(n,r){i.isString(n)&&r instanceof t.ACL?(t.Object.prototype.constructor.call(this,null,null),this.setName(n),this.setACL(r)):t.Object.prototype.constructor.call(this,n,r)},getName:function(){return this.get("name")},setName:function(n,t){return this.set("name",n,t)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(n,r){if("name"in n&&n.name!==this.getName()){var u=n.name;if(this.id&&this.id!==n.objectId)return new t.Error(t.Error.OTHER_CAUSE,"A role's name can only be set before it has been saved.");if(!i.isString(u))return new t.Error(t.Error.OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(u))return new t.Error(t.Error.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}return t.Object.prototype.validate?t.Object.prototype.validate.call(this,n,r):!1}})}(this),function(n){var t,i,r;n.Parse=n.Parse||{};t=n.Parse;i=t._;t.Collection=function(n,t){t=t||{};t.comparator&&(this.comparator=t.comparator);t.model&&(this.model=t.model);t.query&&(this.query=t.query);this._reset();this.initialize.apply(this,arguments);n&&this.reset(n,{silent:!0,parse:t.parse})};i.extend(t.Collection.prototype,t.Events,{model:t.Object,initialize:function(){},toJSON:function(){return this.map(function(n){return n.toJSON()})},add:function(n,r){var f,c,e,u,s,o,h={},l={};for(r=r||{},n=i.isArray(n)?n.slice():[n],f=0,e=n.length;f<e;f++){if(n[f]=this._prepareModel(n[f],r),u=n[f],!u)throw new Error("Can't add an invalid model to a collection");if(s=u.cid,h[s]||this._byCid[s])throw new Error("Duplicate cid: can't add the same model to a collection twice");if(o=u.id,!t._isNullOrUndefined(o)&&(l[o]||this._byId[o]))throw new Error("Duplicate id: can't add the same model to a collection twice");l[o]=u;h[s]=u}for(f=0;f<e;f++){(u=n[f]).on("all",this._onModelEvent,this);this._byCid[u.cid]=u;u.id&&(this._byId[u.id]=u)}if(this.length+=e,c=t._isNullOrUndefined(r.at)?this.models.length:r.at,this.models.splice.apply(this.models,[c,0].concat(n)),this.comparator&&this.sort({silent:!0}),r.silent)return this;for(f=0,e=this.models.length;f<e;f++)u=this.models[f],h[u.cid]&&(r.index=f,u.trigger("add",u,this,r));return this},remove:function(n,t){var u,e,f,r;for(t=t||{},n=i.isArray(n)?n.slice():[n],u=0,e=n.length;u<e;u++)(r=this.getByCid(n[u])||this.get(n[u]),r)&&(delete this._byId[r.id],delete this._byCid[r.cid],f=this.indexOf(r),this.models.splice(f,1),this.length--,t.silent||(t.index=f,r.trigger("remove",r,this,t)),this._removeReference(r));return this},get:function(n){return n&&this._byId[n.id||n]},getByCid:function(n){return n&&this._byCid[n.cid||n]},at:function(n){return this.models[n]},sort:function(n){if(n=n||{},!this.comparator)throw new Error("Cannot sort a set without a comparator");var t=i.bind(this.comparator,this);return this.comparator.length===1?this.models=this.sortBy(t):this.models.sort(t),n.silent||this.trigger("reset",this,n),this},pluck:function(n){return i.map(this.models,function(t){return t.get(n)})},reset:function(n,i){var r=this;return n=n||[],i=i||{},t._arrayEach(this.models,function(n){r._removeReference(n)}),this._reset(),this.add(n,{silent:!0,parse:i.parse}),i.silent||this.trigger("reset",this,i),this},fetch:function(n){n=i.clone(n)||{};n.parse===undefined&&(n.parse=!0);var r=this,u=this.query||new t.Query(this.model);return u.find({useMasterKey:n.useMasterKey}).then(function(t){return n.add?r.add(t,n):r.reset(t,n),r})._thenRunCallbacks(n,this)},create:function(n,t){var u=this,r;return(t=t?i.clone(t):{},n=this._prepareModel(n,t),!n)?!1:(t.wait||u.add(n,t),r=t.success,t.success=function(i,f){t.wait&&u.add(i,t);r?r(i,f):i.trigger("sync",n,f,t)},n.save(null,t),n)},parse:function(n){return n},chain:function(){return i(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(n,i){if(n instanceof t.Object)n.collection||(n.collection=this);else{var r=n;i.collection=this;n=new this.model(r,i);n._validate(n.attributes,i)||(n=!1)}return n},_removeReference:function(n){this===n.collection&&delete n.collection;n.off("all",this._onModelEvent,this)},_onModelEvent:function(n,t,i,r){(n!=="add"&&n!=="remove"||i===this)&&(n==="destroy"&&this.remove(t,r),t&&n==="change:objectId"&&(delete this._byId[t.previous("objectId")],this._byId[t.id]=t),this.trigger.apply(this,arguments))}});r=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];t._arrayEach(r,function(n){t.Collection.prototype[n]=function(){return i[n].apply(i,[this.models].concat(i.toArray(arguments)))}});t.Collection.extend=t._extend}(this),function(n){var t,i,r,u;n.Parse=n.Parse||{};t=n.Parse;i=t._;t.View=function(n){this.cid=i.uniqueId("view");this._configure(n||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};r=/^(\S+)\s*(.*)$/;u=["model","collection","el","id","attributes","className","tagName"];i.extend(t.View.prototype,t.Events,{tagName:"div",$:function(n){return this.$el.find(n)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(n,i,r){var u=document.createElement(n);return i&&t.$(u).attr(i),r&&t.$(u).html(r),u},setElement:function(n,i){return this.$el=t.$(n),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(n){if(n=n||t._getValue(this,"events"),n){this.undelegateEvents();var u=this;t._objectEach(n,function(t,f){if(i.isFunction(t)||(t=u[n[f]]),!t)throw new Error('Event "'+n[f]+'" does not exist');var o=f.match(r),e=o[1],s=o[2];t=i.bind(t,u);e+=".delegateEvents"+u.cid;s===""?u.$el.bind(e,t):u.$el.delegate(s,e,t)})}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(n){this.options&&(n=i.extend({},this.options,n));var t=this;i.each(u,function(i){n[i]&&(t[i]=n[i])});this.options=n},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var n=t._getValue(this,"attributes")||{};this.id&&(n.id=this.id);this.className&&(n["class"]=this.className);this.setElement(this.make(this.tagName,n),!1)}}});t.View.extend=t._extend}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._;t.User=t.Object.extend("_User",{_isCurrentUser:!1,_mergeFromObject:function(n){n.getSessionToken()&&(this._sessionToken=n.getSessionToken());t.User.__super__._mergeFromObject.call(this,n)},_mergeMagicFields:function(n){n.sessionToken&&(this._sessionToken=n.sessionToken,delete n.sessionToken);t.User.__super__._mergeMagicFields.call(this,n)},_cleanupAuthData:function(){if(this.isCurrent()){var n=this.get("authData");n&&t._objectEach(this.get("authData"),function(t,i){n[i]||delete n[i]})}},_synchronizeAllAuthData:function(){var i=this.get("authData"),n;i&&(n=this,t._objectEach(this.get("authData"),function(t,i){n._synchronizeAuthData(i)}))},_synchronizeAuthData:function(n){var r,u,f;this.isCurrent()&&(i.isString(n)?(r=n,n=t.User._authProviders[r]):r=n.getAuthType(),u=this.get("authData"),u&&n)&&(f=n.restoreAuthentication(u[r]),f||this._unlinkFrom(n))},_handleSaveResult:function(n){n&&(this._isCurrentUser=!0);this._cleanupAuthData();this._synchronizeAllAuthData();delete this._serverData.password;this._rebuildEstimatedDataForKey("password");this._refreshCache();(n||this.isCurrent())&&t.User._saveCurrentUser(this)},_linkWith:function(n,r){var o,u,s,f,e;return i.isString(n)?(o=n,n=t.User._authProviders[n]):o=n.getAuthType(),i.has(r,"authData")?(u=this.get("authData")||{},u[o]=r.authData,this.set("authData",u),s=i.clone(r)||{},s.success=function(n){n._handleSaveResult(!0);r.success&&r.success.apply(this,arguments)},this.save({authData:u},s)):(f=this,e=new t.Promise,n.authenticate({success:function(n,t){f._linkWith(n,{authData:t,success:r.success,error:r.error}).then(function(){e.resolve(f)})},error:function(n,t){r.error&&r.error(f,t);e.reject(t)}}),e)},_unlinkFrom:function(n,r){var f,u,e;return i.isString(n)?(f=n,n=t.User._authProviders[n]):f=n.getAuthType(),u=i.clone(r),e=this,u.authData=null,u.success=function(){e._synchronizeAuthData(n);r.success&&r.success.apply(this,arguments)},this._linkWith(n,u)},_isLinked:function(n){var t,r;return t=i.isString(n)?n:n.getAuthType(),r=this.get("authData")||{},!!r[t]},_logOutWithAll:function(){var i=this.get("authData"),n;i&&(n=this,t._objectEach(this.get("authData"),function(t,i){n._logOutWith(i)}))},_logOutWith:function(n){this.isCurrent()&&(i.isString(n)&&(n=t.User._authProviders[n]),n&&n.deauthenticate&&n.deauthenticate())},signUp:function(n,r){var u,f,e,o;return(r=r||{},f=n&&n.username||this.get("username"),!f||f==="")?(u=new t.Error(t.Error.OTHER_CAUSE,"Cannot sign up user with an empty name."),r&&r.error&&r.error(this,u),t.Promise.error(u)):(e=n&&n.password||this.get("password"),!e||e==="")?(u=new t.Error(t.Error.OTHER_CAUSE,"Cannot sign up user with an empty password."),r&&r.error&&r.error(this,u),t.Promise.error(u)):(o=i.clone(r),o.success=function(n){n._handleSaveResult(!0);r.success&&r.success.apply(this,arguments)},this.save(n,o))},logIn:function(n){var i=this,r;return n=n||{},r=t._request({route:"login",method:"GET",useMasterKey:n.useMasterKey,data:this.toJSON()}),r.then(function(n,t,r){var u=i.parse(n,t,r);return i._finishFetch(u),i._handleSaveResult(!0),i})._thenRunCallbacks(n,this)},save:function(n,r,u){var e,f,o;return i.isObject(n)||i.isNull(n)||i.isUndefined(n)?(e=n,f=r):(e={},e[n]=r,f=u),f=f||{},o=i.clone(f),o.success=function(n){n._handleSaveResult(!1);f.success&&f.success.apply(this,arguments)},t.Object.prototype.save.call(this,e,o)},fetch:function(n){var r=n?i.clone(n):{};return r.success=function(t){t._handleSaveResult(!1);n&&n.success&&n.success.apply(this,arguments)},t.Object.prototype.fetch.call(this,r)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},setUsername:function(n,t){return this.set("username",n,t)},setPassword:function(n,t){return this.set("password",n,t)},getEmail:function(){return this.get("email")},setEmail:function(n,t){return this.set("email",n,t)},authenticated:function(){return!!this._sessionToken&&t.User.current()&&t.User.current().id===this.id},getSessionToken:function(){return this._sessionToken}},{_currentUser:null,_currentUserMatchesDisk:!1,_CURRENT_USER_KEY:"currentUser",_authProviders:{},_performUserRewrite:!0,signUp:function(n,i,r,u){r=r||{};r.username=n;r.password=i;var f=t.Object._create("_User");return f.signUp(r,u)},logIn:function(n,i,r){var u=t.Object._create("_User");return u._finishFetch({username:n,password:i}),u.logIn(r)},become:function(n,i){i=i||{};var r=t.Object._create("_User");return t._request({route:"users",className:"me",method:"GET",useMasterKey:i.useMasterKey,sessionToken:n}).then(function(n,t,i){var u=r.parse(n,t,i);return r._finishFetch(u),r._handleSaveResult(!0),r})._thenRunCallbacks(i,r)},logOut:function(){t.User._currentUser!==null&&(t.User._currentUser._logOutWithAll(),t.User._currentUser._isCurrentUser=!1);t.User._currentUserMatchesDisk=!0;t.User._currentUser=null;t.localStorage.removeItem(t._getParsePath(t.User._CURRENT_USER_KEY))},requestPasswordReset:function(n,i){i=i||{};var r=t._request({route:"requestPasswordReset",method:"POST",useMasterKey:i.useMasterKey,data:{email:n}});return r._thenRunCallbacks(i)},current:function(){var i,n;return t.User._currentUser?t.User._currentUser:t.User._currentUserMatchesDisk?t.User._currentUser:(t.User._currentUserMatchesDisk=!0,i=t.localStorage.getItem(t._getParsePath(t.User._CURRENT_USER_KEY)),!i)?null:(t.User._currentUser=t.Object._create("_User"),t.User._currentUser._isCurrentUser=!0,n=JSON.parse(i),t.User._currentUser.id=n._id,delete n._id,t.User._currentUser._sessionToken=n._sessionToken,delete n._sessionToken,t.User._currentUser._finishFetch(n),t.User._currentUser._synchronizeAllAuthData(),t.User._currentUser._refreshCache(),t.User._currentUser._opSetQueue=[{}],t.User._currentUser)},allowCustomUserClass:function(n){this._performUserRewrite=!n},_saveCurrentUser:function(n){t.User._currentUser!==n&&t.User.logOut();n._isCurrentUser=!0;t.User._currentUser=n;t.User._currentUserMatchesDisk=!0;var i=n.toJSON();i._id=n.id;i._sessionToken=n._sessionToken;t.localStorage.setItem(t._getParsePath(t.User._CURRENT_USER_KEY),JSON.stringify(i))},_registerAuthenticationProvider:function(n){t.User._authProviders[n.getAuthType()]=n;t.User.current()&&t.User.current()._synchronizeAuthData(n.getAuthType())},_logInWith:function(n,i){var r=t.Object._create("_User");return r._linkWith(n,i)}})}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._;t.Query=function(n){i.isString(n)&&(n=t.Object._getSubclass(n));this.objectClass=n;this.className=n.prototype.className;this._where={};this._include=[];this._limit=-1;this._skip=0;this._extraOptions={}};t.Query.or=function(){var u=i.toArray(arguments),n=null,r;return t._arrayEach(u,function(t){if(i.isNull(n)&&(n=t.className),n!==t.className)throw"All queries must be for the same class";}),r=new t.Query(n),r._orQuery(u),r};t.Query.prototype={get:function(n,r){var f=this,u;return f.equalTo("objectId",n),u={},r&&i.has(r,"useMasterKey")&&(u={useMasterKey:r.useMasterKey}),f.first(u).then(function(n){if(n)return n;var i=new t.Error(t.Error.OBJECT_NOT_FOUND,"Object not found.");return t.Promise.error(i)})._thenRunCallbacks(r,null)},toJSON:function(){var n={where:this._where};return this._include.length>0&&(n.include=this._include.join(",")),this._select&&(n.keys=this._select.join(",")),this._limit>=0&&(n.limit=this._limit),this._skip>0&&(n.skip=this._skip),this._order!==undefined&&(n.order=this._order.join(",")),t._objectEach(this._extraOptions,function(t,i){n[i]=t}),n},find:function(n){var u=this,r;return n=n||{},r=t._request({route:"classes",className:this.className,method:"GET",useMasterKey:n.useMasterKey,data:this.toJSON()}),r.then(function(n){return i.map(n.results,function(i){var r;return r=n.className?new t.Object(n.className):new u.objectClass,r._finishFetch(i,!0),r})})._thenRunCallbacks(n)},count:function(n){var u=this,i,r;return n=n||{},i=this.toJSON(),i.limit=0,i.count=1,r=t._request({route:"classes",className:u.className,method:"GET",useMasterKey:n.useMasterKey,data:i}),r.then(function(n){return n.count})._thenRunCallbacks(n)},first:function(n){var f=this,r,u;return n=n||{},r=this.toJSON(),r.limit=1,u=t._request({route:"classes",className:this.className,method:"GET",useMasterKey:n.useMasterKey,data:r}),u.then(function(n){return i.map(n.results,function(n){var t=new f.objectClass;return t._finishFetch(n,!0),t})[0]})._thenRunCallbacks(n)},collection:function(n,r){return r=r||{},new t.Collection(n,i.extend(r,{model:this.objectClass,query:this}))},skip:function(n){return this._skip=n,this},limit:function(n){return this._limit=n,this},equalTo:function(n,r){return i.isUndefined(r)?this.doesNotExist(n):(this._where[n]=t._encode(r),this)},_addCondition:function(n,i,r){return this._where[n]||(this._where[n]={}),this._where[n][i]=t._encode(r),this},notEqualTo:function(n,t){return this._addCondition(n,"$ne",t),this},lessThan:function(n,t){return this._addCondition(n,"$lt",t),this},greaterThan:function(n,t){return this._addCondition(n,"$gt",t),this},lessThanOrEqualTo:function(n,t){return this._addCondition(n,"$lte",t),this},greaterThanOrEqualTo:function(n,t){return this._addCondition(n,"$gte",t),this},containedIn:function(n,t){return this._addCondition(n,"$in",t),this},notContainedIn:function(n,t){return this._addCondition(n,"$nin",t),this},containsAll:function(n,t){return this._addCondition(n,"$all",t),this},exists:function(n){return this._addCondition(n,"$exists",!0),this},doesNotExist:function(n){return this._addCondition(n,"$exists",!1),this},matches:function(n,t,i){return this._addCondition(n,"$regex",t),i||(i=""),t.ignoreCase&&(i+="i"),t.multiline&&(i+="m"),i&&i.length&&this._addCondition(n,"$options",i),this},matchesQuery:function(n,t){var i=t.toJSON();return i.className=t.className,this._addCondition(n,"$inQuery",i),this},doesNotMatchQuery:function(n,t){var i=t.toJSON();return i.className=t.className,this._addCondition(n,"$notInQuery",i),this},matchesKeyInQuery:function(n,t,i){var r=i.toJSON();return r.className=i.className,this._addCondition(n,"$select",{key:t,query:r}),this},doesNotMatchKeyInQuery:function(n,t,i){var r=i.toJSON();return r.className=i.className,this._addCondition(n,"$dontSelect",{key:t,query:r}),this},_orQuery:function(n){var t=i.map(n,function(n){return n.toJSON().where});return this._where.$or=t,this},_quote:function(n){return"\\Q"+n.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(n,t){return this._addCondition(n,"$regex",this._quote(t)),this},startsWith:function(n,t){return this._addCondition(n,"$regex","^"+this._quote(t)),this},endsWith:function(n,t){return this._addCondition(n,"$regex",this._quote(t)+"$"),this},ascending:function(){return this._order=[],this.addAscending.apply(this,arguments)},addAscending:function(){var n=this;return this._order||(this._order=[]),t._arrayEach(arguments,function(t){Array.isArray(t)&&(t=t.join());n._order=n._order.concat(t.replace(/\s/g,"").split(","))}),this},descending:function(){return this._order=[],this.addDescending.apply(this,arguments)},addDescending:function(){var n=this;return this._order||(this._order=[]),t._arrayEach(arguments,function(t){Array.isArray(t)&&(t=t.join());n._order=n._order.concat(i.map(t.replace(/\s/g,"").split(","),function(n){return"-"+n}))}),this},near:function(n,i){return i instanceof t.GeoPoint||(i=new t.GeoPoint(i)),this._addCondition(n,"$nearSphere",i),this},withinRadians:function(n,t,i){return this.near(n,t),this._addCondition(n,"$maxDistance",i),this},withinMiles:function(n,t,i){return this.withinRadians(n,t,i/3958.8)},withinKilometers:function(n,t,i){return this.withinRadians(n,t,i/6371)},withinGeoBox:function(n,i,r){return i instanceof t.GeoPoint||(i=new t.GeoPoint(i)),r instanceof t.GeoPoint||(r=new t.GeoPoint(r)),this._addCondition(n,"$within",{$box:[i,r]}),this},include:function(){var n=this;return t._arrayEach(arguments,function(t){i.isArray(t)?n._include=n._include.concat(t):n._include.push(t)}),this},select:function(){var n=this;return this._select=this._select||[],t._arrayEach(arguments,function(t){i.isArray(t)?n._select=n._select.concat(t):n._select.push(t)}),this},each:function(n,r){var e,o,u,f;return(r=r||{},this._order||this._skip||this._limit>=0)?(e="Cannot iterate on a query with sort, skip, or limit.",t.Promise.error(e)._thenRunCallbacks(r)):(o=new t.Promise,u=new t.Query(this.objectClass),u._limit=r.batchSize||100,u._where=i.clone(this._where),u._include=i.clone(this._include),u.ascending("objectId"),f=!1,t.Promise._continueWhile(function(){return!f},function(){return u.find().then(function(i){var r=t.Promise.as();return t._.each(i,function(t){r=r.then(function(){return n(t)})}),r.then(function(){i.length>=u._limit?u.greaterThan("objectId",i[i.length-1].id):f=!0})})})._thenRunCallbacks(r))}}}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._,u=!1,f,r,e={authenticate:function(n){var t=this;FB.login(function(i){i.authResponse?n.success&&n.success(t,{id:i.authResponse.userID,access_token:i.authResponse.accessToken,expiration_date:new Date(i.authResponse.expiresIn*1e3+(new Date).getTime()).toJSON()}):n.error&&n.error(t,i)},{scope:f})},restoreAuthentication:function(n){var f,u,e;return n&&(f={userID:n.id,accessToken:n.access_token,expiresIn:(t._parseDate(n.expiration_date).getTime()-(new Date).getTime())/1e3},u=i.clone(r),u.authResponse=f,u.status=!1,e=FB.getAuthResponse(),e&&e.userID!==f.userID&&FB.logout(),FB.init(u)),!0},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null)}};t.FacebookUtils={init:function(n){if(typeof FB=="undefined")throw"The Facebook JavaScript SDK must be loaded before calling init.";if(r=i.clone(n)||{},r.status&&typeof console!="undefined"){var f=console.warn||console.log||function(){};f.call(console,"The 'status' flag passed into FB.init, when set to true, can interfere with Parse Facebook integration, so it has been suppressed. Please call FB.getLoginStatus() explicitly if you require this behavior.")}r.status=!1;FB.init(r);t.User._registerAuthenticationProvider(e);u=!0},isLinked:function(n){return n._isLinked("facebook")},logIn:function(n,r){if(!n||i.isString(n)){if(!u)throw"You must initialize FacebookUtils before calling logIn.";return f=n,t.User._logInWith("facebook",r)}var e=i.clone(r)||{};return e.authData=n,t.User._logInWith("facebook",e)},link:function(n,t,r){if(!t||i.isString(t)){if(!u)throw"You must initialize FacebookUtils before calling link.";return f=t,n._linkWith("facebook",r)}var e=i.clone(r)||{};return e.authData=t,n._linkWith("facebook",e)},unlink:function(n,t){if(!u)throw"You must initialize FacebookUtils before calling unlink.";return n._unlinkFrom("facebook",t)}}}(this),function(n){var t,i,r,u;n.Parse=n.Parse||{};t=n.Parse;i=t._;t.History=function(){this.handlers=[];i.bindAll(this,"checkUrl")};r=/^[#\/]/;u=/msie [\w.]+/;t.History.started=!1;i.extend(t.History.prototype,t.Events,{interval:50,getHash:function(n){var i=n?n.location:window.location,t=i.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(n,i){if(t._isNullOrUndefined(n))if(this._hasPushState||i){n=window.location.pathname;var u=window.location.search;u&&(n+=u)}else n=this.getHash();return n.indexOf(this.options.root)||(n=n.substr(this.options.root.length)),n.replace(r,"")},start:function(n){var f,e;if(t.History.started)throw new Error("Parse.history has already been started");t.History.started=!0;this.options=i.extend({},{root:"/"},this.options,n);this._wantsHashChange=this.options.hashChange!==!1;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var o=this.getFragment(),s=document.documentMode,h=u.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);return(h&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(o)),this._hasPushState?t.$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!h?t.$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=window.setInterval(this.checkUrl,this.interval)),this.fragment=o,f=window.location,e=f.pathname===this.options.root,this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!e)?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&e&&f.hash&&(this.fragment=this.getHash().replace(r,""),window.history.replaceState({},document.title,f.protocol+"//"+f.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);window.clearInterval(this._checkUrlInterval);t.History.started=!1},route:function(n,t){this.handlers.unshift({route:n,callback:t})},checkUrl:function(){var n=this.getFragment();if(n===this.fragment&&this.iframe&&(n=this.getFragment(this.getHash(this.iframe))),n===this.fragment)return!1;this.iframe&&this.navigate(n);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(n){var t=this.fragment=this.getFragment(n);return i.any(this.handlers,function(n){if(n.route.test(t))return n.callback(t),!0})},navigate:function(n,i){var u,f;if(!t.History.started)return!1;(i&&i!==!0||(i={trigger:i}),u=(n||"").replace(r,""),this.fragment!==u)&&(this._hasPushState?(u.indexOf(this.options.root)!==0&&(u=this.options.root+u),this.fragment=u,f=i.replace?"replaceState":"pushState",window.history[f]({},document.title,u)):this._wantsHashChange?(this.fragment=u,this._updateHash(window.location,u,i.replace),this.iframe&&u!==this.getFragment(this.getHash(this.iframe))&&(i.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,u,i.replace))):window.location.assign(this.options.root+n),i.trigger&&this.loadUrl(n))},_updateHash:function(n,t,i){if(i){var r=n.toString().replace(/(javascript:|#).*$/,"");n.replace(r+"#"+t)}else n.hash=t}})}(this),function(n){var t,i;n.Parse=n.Parse||{};t=n.Parse;i=t._;t.Router=function(n){n=n||{};n.routes&&(this.routes=n.routes);this._bindRoutes();this.initialize.apply(this,arguments)};var r=/:\w+/g,u=/\*\w+/g,f=/[\-\[\]{}()+?.,\\\^\$\|#\s]/g;i.extend(t.Router.prototype,t.Events,{initialize:function(){},route:function(n,r,u){return t.history=t.history||new t.History,i.isRegExp(n)||(n=this._routeToRegExp(n)),u||(u=this[r]),t.history.route(n,i.bind(function(i){var f=this._extractParameters(n,i);u&&u.apply(this,f);this.trigger.apply(this,["route:"+r].concat(f));t.history.trigger("route",this,r,f)},this)),this},navigate:function(n,i){t.history.navigate(n,i)},_bindRoutes:function(){var n,i,t,r;if(this.routes){n=[];for(i in this.routes)this.routes.hasOwnProperty(i)&&n.unshift([i,this.routes[i]]);for(t=0,r=n.length;t<r;t++)this.route(n[t][0],n[t][1],this[n[t][1]])}},_routeToRegExp:function(n){return n=n.replace(f,"\\$&").replace(r,"([^/]+)").replace(u,"(.*?)"),new RegExp("^"+n+"$")},_extractParameters:function(n,t){return n.exec(t).slice(1)}});t.Router.extend=t._extend}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse,i=t._;t.Cloud=t.Cloud||{};i.extend(t.Cloud,{run:function(n,i,r){r=r||{};var u=t._request({route:"functions",className:n,method:"POST",useMasterKey:r.useMasterKey,data:t._encode(i,null,!0)});return u.then(function(n){return t._decode(null,n).result})._thenRunCallbacks(r)}})}(this),function(n){n.Parse=n.Parse||{};var t=n.Parse;t.Installation=t.Object.extend("_Installation");t.Push=t.Push||{};t.Push.send=function(n,i){if(i=i||{},n.where&&(n.where=n.where.toJSON().where),n.push_time&&(n.push_time=n.push_time.toJSON()),n.expiration_time&&(n.expiration_time=n.expiration_time.toJSON()),n.expiration_time&&n.expiration_interval)throw"Both expiration_time and expiration_interval can't be set";var r=t._request({route:"push",method:"POST",data:n,useMasterKey:i.useMasterKey});return r._thenRunCallbacks(i)}}(this);
/*
//# sourceMappingURL=parse.min.js.map
*/